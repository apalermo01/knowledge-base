

## Describe Azure directory services

- Azure Active Directory (Azure AD) - service to sign in and access MS cloud applications and apps that you develop. 
- On prem: can run on a windows server - provide an IAM service managed by org
- Who uses it? 
	- IT administrators
	- App developers
	- users
	- Online service subscibers (i.e. if you use MS 365, etc. you already use Azure AD to authenticate)
- What does Azure AD do?
	- Authentication
	- Single sign-on (SSO)
		- remember one username / password to access multiple applications
	- application management
	- device management
- connecting on-prem AD with Azure AD?
	- if you use them separately, you need two identity sets. Can connect active directory with Azure AD
	- use Azure AD Connect -> syncs user identities between AD and Azure AD.
- What is Azure Active Directory Domain Services (Azure AD DS)?
	- managed domain services. Examples:
		- domain join
		- group policy
		- lightweight directory access protocol (LDAP)
		- kerberos/NTLM authentication
	- don't need to deploy, manage, and patch domain controllers (DCs) in the cloud
	- **lets you run legacy apps that can't use modern authentication methods**

	- How does Azure AD DS work?
		- define a unique namespace (domain name)
		- creates a managed domain that performs a 1-way sync from Azure AD to Azure AD DS. Can create resources in the managed domain that isn't synced back to azure AD
		![[Azure AD DS.png]]

## Describe Azure authentication methods

![[Authentication methods.png]]

- What's Single Sign On (SSO)?
	- sign in one time and use a credential to access mutliple resources / applications for different providers
	- Different applications / providers must trust the initial authenticator
	- more passwords = more opportunities for credential-related security incidents
	- **SSO is only as secure as the initial authenticator becuase subsequent connections are all based on the security of the initial authenticator**
- What's Multifactor Authentication?
	- extra layer of securty past the password
	- examples:
		- a challenge question
		- code sent to the user's mobile device
		- biometric property (e.g. fingerprint or face scan)
- Azure AD Multi-factor authentication
	- MS service that allows you to provide MFA capabilities
- Passwordless authentication
	- instead of a password, just use the second factor for 2FA (e.g. phone authenticator)
	- passwordless authentication options:
		- windows hello for business
			- biometric and PIN credentials are tied directly to user's pc
		- microsoft authenticator app
			- sign in to any platform or browser by getting a notification on your phone
		- FIDO2 security keys
			- FIDO (Fast IDentify Online) allience -> promotes open authentication standards and reduce the use of passwords.
			- typically a usb or other hardware device handles authentication

## Describe Azure external identities

- referes to all the ways you can securely interact with users outside of your organization
- users 'bring their own identities'. ex: corporate / gov identiy, google, facebook![[Azure AD External Identities.png]]


- capabilities:
	- B2B collaboration
		- collaborate with external users using their preferred identity to sign in
	- B2B direct connect
		- 2-way trust with another Azure AD organization
	- Azure AD business to customer (B2C)

## Describe Azure conditional access

- allow (or deny) access to resources based on identity signals
- helps empower users to be productive wherever and whenever and protect organization's assets.
- ex: no second authentication factor if they're at a known location ![[conditional access.png]]
	- signal: user's location / device / or application
	- decision: sigining in from unusual location? block access entirely or require a second form of auth
	- enforcement: action that carries out the decision
- When can I use conditional access?
	- require MFA depending on role, location, or network
	- require access only through approved client applications
	- require access only from managed devices
	- block untrusted sources

## Describe Azure role-based access control

- principle of least privilege: only grant access up to the level needed to complete a task
- provides built in roles describing common access rules for cloud resources
- How is role-based access control applies to resources?
	- role-based access control is appplied to a scope -> a resource or set of resources that theis access applies to![[RBAC.png]]
	- scopes may include: management gropu, a single subscription, a resource group, a single resource
	- RBAC is heirarhical
		- when you grant access to a parent scope, permisions are inherited by all child scopes
		- ex: when you assign the owner role to a user at the management group scope, that user can manage everything in all subscriptions within that management group
		- ex: when you assign the reader role at the subscription scope, members of that group can view every resource group and resource within that subscription
- How is RBAC enforced?
	- enforced on any action that's initiatied against an azure resource that masses through azure resource manager
	- does not enforce access permissions at the application or data level

## Describe the zero trust model

- security model that assumes the worst case scenario and protects resources with that expectation. Assumes breach at outset.
- 3 principles:
	- verity explicitly -> always authenticate and authorize based on all available datapoints
	- use least privilege access -> limit user access with just in time and just enough access (JIT/JEA), risk-based adaptive policies, and data protection
	- Assume breach -> minimize blast radius and segment access. Verify end-to-end encryption. Use analytics to get visibilty, drive threat detection, and improve defenses
- Adjusting to zero trust
	- previously: restrict everything to a secure network
	- now: instead of assuming a device is safe becuase it's within a corporate network, require everyone to require authentication. Grant access based on authentication rather than location.

## Describe defense in-depth

- objective: protect information and prevent it from being stolen
- think of it as a series of layers:        
![[layers of defense in-depth.png]]
- description of each layer
	- physical security: access to buildings and controlling access to computing hardware within the datacenter
	- Identity and access: ensuring that identities are secure, access to granted to only what's needed, and sign-in events and changes are logged (e.g. SSO, MFA, audit events / changes)
	- perimeter: prevents network-based attacks (e.g. DDoS protection and firewalls)
	- Network: limit network connectivity across resources to whats required (e.g. limit communication, deny by default, restrict internet access)
	- compute: ensure compute resources are secure (e.g. secure access to VMs, implement endpoint protection on devices, keep systems patched and current)
	- Application: ensure that the code written is secure
	- Data: ensure data is stored securely

## Describe Microsoft Defender for Cloud

- monitoring tool for security posture management and threat protection
- Protection everywhere you're deployed
	- Azure-native service -> so many services are monitored and protectedd without needing any deployment. 
	- can automatically deploy a Log Analytics agent
	- Azure Arc - extends microsoft defender plans to non-azure machines
- Azure-native protections
	- Detects threats across:
		- azure PaaS services
		- Azure data services
		- Networks
- Defend hybrid resources
- Defend resources running on other clouds
	- can also protect resources in AWS and GCP
	- CSPM features -> agentless plan assesses AWS resources to AWS-specific security recommendations
	- Defender for containers -> Amazon EKS linux clusters
	- Defender for server -> windows and linux EC2 instances
- Assess, Secure, and Defend
	- Continually asssesses the environment
	- Secure: automatically  assesses the configuration of newly deployed resources for azure-specific best practices
		- provides a 'secure score' - an at-a-glance indicator at the health of your security posture
	- Defend: provides security laerts
		- when an threat is detected, the security alert will:
			- desribe details of affected resources
			- suggest remediation steps
			- in some cases, an option to trigger a logic app  in response
